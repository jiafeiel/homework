# linux学习笔记
# 一、Linux基础
## 计算机系统
### 1、计算机系统=硬件系统+软件系统  
计算机硬件组成：冯诺依曼体系
由计算器、控制器、存储器、输出/输入设备五大部分组成，存储器分为外存和内存。  
### 2、服务器（Server）:在网络中为客户端计算机提供各种服务的高性能的计算机，也能为网络用户提供集中计算、信息发布及数据管理等服务。塔式和刀片式服务器由于没有规定标准，所以每个品牌的大小不一样，而机架式服务器有标准的规定，兼容性也最强所以使用也最广，高度用U为单位，有1U\2U\3U等几种标准的服务器。  
### 2.1、 服务器硬件--CPU  
 主频：CPU的时钟频率，是CPU运算时的工作的频率简称。  
 外频：系统总线的工作频率，CPU与外部交换数据的工作时钟频率。  
 倍频：CPU外频与主频相差的倍数。  
 高速缓存：分为1、2、3级。 
 内存总线速度：一般等同于CPU的外频，是CPU与二级高速缓存与内存直接的通信速度。
 地址总线：决定CPU可以访问的物理地址空间。 
 服务器CPU按体系结构分为X86体系（复杂指令集）：价格昂贵，稳定，性能好和非X86体系（精简指令集）：兼容性好，稳定差安全性不高。  
 主板也是计算机最基本也是最重要的部件之一，安装了计算机的主要电路系统。  
 内存：是CPU存储数据和中间结果的临时场所，是CPU能直接寻址的存储空间，存取速度快。  
 内存和外存的区别：内存速度比外存快，断电后数据丢失，外存断电后数据可以保存。  
 内存带宽=内存总线频率*数据总线位数/8  
 服务器硬盘主流接口类型:  
 SATA:支持热插拔  
 SAS：兼容SATA  
 SSD硬盘：没有机械机构，以区块写入和抹除的方式坐读写功能，性能稳定，防震性高，发热低，无噪音，价格高，容量小。  
 一个硬盘只有一个活动分区  
 扩展分区：一个硬盘只能有一个，加主分区最多四个，不能创建NTFS文件系统，可以在划分更小的分区  
 挂载：把一个分区和一个文件夹关联起来，文件夹叫做挂载点 
 /dev/sda:代表第一块硬盘  
 /dev/cda:虚拟机的硬盘  
 主分区和扩展分区用1-4表示，逻辑分区从5开始  
 sd后面加字母代表第几块硬盘：a-z,aa...zz...  
 shift+向上按键可以翻看字符界面  
 SWAP分区：在物理内存不够用的情况下，释放一部分程序，被释放的空间临时保存在swap分区  
 热插拔技术：允许在不关机的情况下更换设备 
 服务器机柜最好选择1000MM以上的，如果是放网络设备600MM就行，因为机架式服务器规定了高度和宽度，没有规定长度  
 服务器主要的操作系统：LINUX、WINDOWS、UNIX  
 兼容分时系统：对CPU运算时间切片，分配给多个用户，公用一台电脑，连接多个终端  
### 3、存储网络  
 DAS:直接连接存储，也就是本地存储。  
 NAS：网络连接存储，局域网共享。  
 SAN：存储区域网络，存储在网络上的服务器。  
###4、开发接口标准 
 ABI：应用程序和OS之间的底层接口  
 API：源代码和库之间的接口  
 WINDOWS运行程序格式：EXE,.DLL,.LIB  
 LIUNX运行程序格式：ELF,.OS,.A  
 用户空间：用户程序的运行空间  
 内核空间：linux内核运行空间  
 Linux的内核版本组成：主版本号.次版本号.末版本号打包版本号.厂商版本号  
 开源协议：是每个开源软件选择其中的协议，让使用该开源软件的个人或团体遵守的协议 
 Linux一起都是文件，数据都是存储在文件中的。 
###5、用户登录 
ROOT用户：已经接近完整的系统控制  
普通用户：有权限限制
###6、终端 
设备终端：输入输出设备  
物理终端：控制台  
还有虚拟终端、图形终端、串行终端、伪终端
tty查看当前的终端设备  
###7、shell：  
提供了用户与内核进行交互操作的一种接口，也是Linux的命令解释器  
bash shell是centos默认的shell  
显示当前使用的shell命令：ech ${SHELL}，显示当前系统使用的所有shell:cat/etc/shells  
8、命令提示符：$是普通用户，#是管理员  
修改提示符格式：PS1=“”  
\e \033 \u 当前用户  
\h 主机名简称      \H 主机名  
\w 当前工作目录    \W 当前工作目录基名  
\t 24小时时间格式  \T12小时时间格式  
\! 命令历史数      \# 开机后命令历史数
### 9、init3切换为字符界面  
init5图形界面  
运行模式 runlevel  
在命令行模式输入startx还是运行3级别，因为startx只是相当于在命令行级别中开启了一个进程  
在图形界面下按ctrl+alt+f2进去图形界面当前级别仍为5  
### 10、命令分为：内部命令和外部命令  
help 内部命令列表  
enable管理内部命令，用enable禁用后会执行外部命令，因为内部命令在外部都有备份  
enable cmd启用内部命令  
enable –n cmd禁用内部命令  
enable –n 查看所有禁用的内部命令  
通过type命令辨别是否为内部命令  
查看外部命令的路径：which -a|--skip-alias;whereis  
### 11、hash表  系统初始hash表示空的，当执行外部命令时，会从PATH路径下寻找命令，找到后会把路径存到hash中，下次执行将先查看hash，没有再去PATH中寻找  
hash 显示hash缓存  
hash –l 显示hash缓存，可作为输入使用  
hash –p path name 将命令全路径path起别名为name  
hash –t name 打印缓存中name的路径  
hash –d name 清除name缓存  
hash –r 清除缓存  
### 12、PATH变量里面存的是外部命令的路径  
命令执行优先情况：命令别名-->内部命令-->hash表（记录外部命令的路径）-->按照$PATH文件夹的路径寻找外部命令  
### 13、命令别名  
alias：显示所有的可用别名  
alias NAME='value':定义别名  
在命令行中修改别名仅对当前shell进程有效，想要永久有效，修改/.bashrc仅对用户管用，修改/etc/bashrc对所有用户有效  
在生产中尽量少用，以免影响其他用户  
修改完文件后不会立即生效需要重新读取配置文件，1、source /path/to/config_file,2、./path/to/config_file  
撤销别名：unalias name,加-a就是取消所有的别名  
别名和内部命令重名会先运行别名的命令  
如果有别名与原命令同名先执行命令别名，想要执行原命令  
### 14、命令格式  
命令 -选项 参数  
-c短选项，--word长选项，用于关闭某个功能  
参数：命令的作用对象  
外部命令可以直接用路径执行  
多个选项以及多参数和命令之间使用空白字符分隔  
取消和结束命令执行：Ctrl+c，Ctrl+d  
多个命令可以用;符号分开  
一个命令可以用\分成多行  
### 15、时间和日期  
系统时钟：内核通过cpu的工作频率进行的  
硬件时钟：主板  
hwclock,clock:显示硬件时钟，-s以硬件时钟为准，-w以系统时钟为准  
时区：/etc/localtime  
显示日历：cal–y  
## 二、简单命令  
### 1、关机 ：halt(不断电)，poweroff(断电)  
重启：reboot,-f强制断电，-p切断电源  
shutdown  
-r: reboot  
-h: halt  
-c：cancel  
TIME：无指定，默认相当于+1（CentOS7）  
 now: 立刻,相当于+0  
 +m: 相对时间表示法，几分钟之后；例如+3  
 hh:mm: 绝对时间表示，指明具体时间  
whoami：显示当前登录有效用户  
nano：文本编辑  
### 2、screen  
创建会话  
screen –S  
加入会话  
screen –x   
退出并关闭会话  
exit  
剥离当前会话 
Ctrl+a,d  
显示所有已经打开的会话  
screen -ls  
恢复某screen会话，突然退出后，重新开机进入会话就可以继续之前的操作  
screen -r  
3、echo：显示字符，输出的字符串间以空白字符隔开, 并在最后加上换行号  
?-E （默认）不支持\解释功能  
?-n 不自动换行  
?-e 启用\字符的解释功能  
 echo "$VAR_NAME” 变量会替换，弱引用  
 echo '$VAR_NAME’ 变量不会替换，强引用  
若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出  
\a 发出警告声  
\b 退格键 
\c 最后不加上换行符号 
\n 换行且光标移至行首  
\r 回车，即光标移至行首，但不换行  
\t 插入tab  
\\插入\字符  
\0nnn 插入nnn（八进制）所代表的ASCII字符  
echo -e '\033[43;31;5mmagedu\033[0m'  
\xHH插入HH（十六进制）所代表的ASCII数字（man 7 ascii）  
### 3.1、$()或``会识别字符中的命令，当做参数给另一个命令。  
｛｝打印重复的字符串，如  
echo file(1,2,3) 输出结果为：file1 file2 file3  
echo {a...z}输出26个小写字母  
echo {000...30...3}从0开始输出，每间隔3输出一个数字，不能超过30  
### 4、字符集和编码  
ASCII码：计算机内部，所有信息最终都是一个二进制值。美国制定了对英语字符与二进制位之间的关系，做了统一规定。ASCII 码一共规定了128个字符的编码，占用了一个字节的后面7位，最前面的一位统一规定为0  
UNICODE:Unicode：用于表示世界上所有语言中的所有字符。每一个符号都给予一个独一无二的编码数字，Unicode 仅仅只是一个字符集，规定了每个字符对应的二进制代码，如何存储则没有规定  
Unicode编码方案：（编码规则不用深究，了解即可）  
UTF-8：变长，1到4个字节  
UTF-16：变长，2或4个字节  
UTF-32：固定长度，4个字节  
### 5、TAB键：补全命令、路径补全  
如果是外部命令bash根据PATH环境变量的路径，自左而右在每个路径搜寻以给定命令名命名的文件，第一次找到的命令即为要执行的命令  
如果只有一个对应的命令按一次就会出现，否则再按一次就会出现一个对应的列表  
在其指定的上级目录下搜索用户给出的字符串当做路径开头  
### 6、history：历史命令  
登录shell后，会读取历史文件夹中记录的命令，/.bash_history  
登录后执行的命令存储在缓存中，用户退出时才会保存到文件中  
-c: 清空命令历史  
-d offset: 删除历史中指定的第offset个命令  
n: 显示最近的n条历史  
-a: 追加本次会话新执行的命令历史列表至历史文件  
-r: 读历史文件附加到历史列表  
-w: 保存历史列表到指定的历史文件  
-n: 读历史文件中未读过的行到历史列表  
-p: 展开历史参数成多行，但不存在历史列表中  
-s: 展开历史参数成一行，附加在历史列表后  
HISTSIZE：设置命令历史记录的条数  
HISTFILE：设置历史文件，默认为~/.bash_history  
HISTFILESIZE：命令历史文件记录历史的条数  
HISTTIMEFORMAT=“%F %T “ 输出时显示时间，在T和F中间可以加字符，输出时会间隔输出信息  
HISTIGNORE=“str1:str2*:… “ 忽略str1命令，str2开头的历史  
?控制命令历史的记录方式：  
环境变量：HISTCONTROL  
ignoredups默认，忽略重复的命令，连续且相同为“重复”  
ignorespace忽略所有以空白开头的命令  
ignoreboth相当于ignoredups, ignorespace的组合  
erasedups删除重复命令  
存放在/etc/profile 或~/.bash_profile  
重复前一个命令的方法：  
 1、按上方向键  
 2、!!回车  
 3、输入!-1回车 
 4、ctrl+p  
ctrl+n在历史记录中的某个位置时，显示当前历史中的下一条命令，不执行  
Ctrl+j执行当前命令  
！n执行历史命令序号为n的命令  
!-n执行历史命令的倒数第n个  
!string 重复前一个以“string”开头的命令  
!?string 重复前一个包含string的命令  
!string:p仅打印命令历史，而不执行  
!$:p 打印输出!$ （上一条命令的最后一个参数）的内容  
!*:p打印输出!*（上一条命令的所有参数）的内容  
^string删除上一条命令中的第一个string  
^string1^string2将上一条命令中的第一个string1替换为string2  
!:gs/string1/string2将上一条命令中所有的string1都替换为string2  
ctrl+r搜索历史命令  
ctrl+g退出搜索模式  
调用前一个命令的最后参数  
!$ 表示  
Esc, .（点击Esc键后松开，然后点击. 键）  
Alt+ .（按住Alt键的同时点击. 键）  
### 7、bash快捷键  
Ctrl + l清屏，相当于clear命令  
Ctrl + o执行当前命令，并重新显示本命令  
Ctrl + s阻止屏幕输出，锁定  
Ctrl + q允许屏幕输出  
Ctrl + c终止命令  
Ctrl + z挂起命令  
Ctrl + a光标移到命令行首，相当于Home  
Ctrl + e光标移到命令行尾，相当于End  
Ctrl + f光标向右移动一个字符  
Ctrl + b光标向左移动一个字符  
Alt + f光标向右移动一个单词尾  
Alt + b光标向左移动一个单词首  
Ctrl + xx光标在命令行首和光标之间移动  
Ctrl + u从光标处删除至命令行首  
Ctrl + k从光标处删除至命令行尾  
Alt + r 删除当前整行  
Ctrl + w从光标处向左删除至单词首  
Alt + d从光标处向右删除至单词尾  
?Ctrl + d删除光标处的一个字符 
?Ctrl + h删除光标前的一个字符  
?Ctrl + y将删除的字符粘贴至光标后  
?Alt + c从光标处开始向右更改为首字母大写的单词  
?Alt + u从光标处开始，将右边一个单词更改为大写  
?Alt + l从光标处开始，将右边一个单词更改为小写  
?Ctrl + t交换光标处和之前的字符位置  
?Alt + t交换光标处和之前的单词位置  
?Alt + N提示输入指定字符后，重复显示该字符N次  
?注意：Alt组合快捷键经常和其它软件冲突  
### 8、帮助  
whatis:显示命令的简短描述，刚安装后不可立即使用，使用一些命令后等一段时间或makewhatis立即使用  
help：显示用法总结和参数列表  
man:提供命令帮助文件，手册页放在/usr/share/man，几乎每个命令都有man页面,页面分为不同的章节  
man命令的配置文件：/etc/man.config| man_db.conf  
MANPATH /PATH/TO/SOMEWHERE: 指明man文件搜索位置  
man -M/PATH/TO/SOMEWHERE COMMAND: 到指定位置下搜索  
man命令的操作方法：  
q: 退出  
#：跳转至第#行  
1G: 回到文件首部  
G：翻至文件尾部  
用man查询出结果，在底部/KEYWORD:以KEYWORD指定的字符串为关键字，从当前位置向文件尾部搜索；不区分字符大小写；  
n: 下一个  
N：上一个  
?KEYWORD:以KEYWORD指定的字符串为关键字，从当前位置向文件首部搜索；不区分字符大小写；  
n: 跟搜索命令同方向，下一个  
N：跟搜索命令反方向，上一个 
### 9、info页：  
方向键，PgUp，PgDn导航 
?Tab键移动到下一个链接  
?d 显示主题目录  
?Home 显示主题首部  
?Enter进入选定链接  
?n/p/u/l进入下/前/上一层/最后一个链接  
?s文字文本搜索  
?q退出info  
内部命令获取帮助：help 命令或man bash  
外部命令：命令 --help或使用各种文档  
### 10、文件系统  
从根目录开始，用/表示
?以.开头的文件为隐藏文件  
?路径分隔的/  
?文件有两类数据：  
元数据：metadata  
数据：data  
### 11、文件名规则  
文件名最长255个字节  
?蓝色-->目录绿色-->可执行文件红色-->压缩文件浅蓝色-->链接文件灰色-->其他文件  
?除了斜杠和NUL,所有字符都有效.但使用特殊字符的目录名和文件不推荐使用，有些字符需要用引号来引用它们  
?标准Linux文件系统文件名称大小写敏感，外围设备大小写不敏感  
### 12、文件系统结构  
/boot：引导文件存放目录，内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录  
?/bin：供所有用户使用的基本命令；不能关联至独立分区，OS启动即会用到的程序  
?/sbin：管理类的基本命令；不能关联至独立分区，OS启动即会用到的程序  
?/lib：启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules)  
?/lib64：专用于x86_64系统上的辅助共享库文件存放位置  
?/etc：配置文件目录  
?/home/USERNAME：普通用户家目录  
?/root：管理员的家目录  
?/media：便携式移动设备挂载点  
/mnt：临时文件系统挂载点  
?/dev：设备文件及特殊文件存储位置  
b: block device，随机访问  
c: character device，线性访问  
?/opt：第三方应用程序的安装位置  
?/srv：系统上运行的服务用到的数据  
?/tmp：临时文件存储位置  
### 13、文件类型  
-：普通文件  
?d: 目录文件  
?b: 块设备  
?c: 字符设备  
?l: 符号链接文件  
?p: 管道文件pipe  
?s: 套接字文件socket  
### 14、CWD：当前的工作目录  
pwd:显示当前工作目录，-P显示真实的物理路径，-L（默认）显示链路路径  
绝对路径：完整的文件位置路径，以/开始  
相对路径：指定相对于当前目录的位置，不以/开始  
路径由目录名+基名组成  
cd：改变目录  
切换至父目录：cd..  
切换至当前用户主目录：cd  
切换至以前的工作目录：cd-  
相关的环境变量：  
PWD：当前目录路径  
OLDPWD：上一次目录路径  
### 15、ls:列出当前目录或指定目录的内容  
ls -a包含隐藏文件  
ls -l显示额外的信息  
ls -R目录递归通过，显示所有目录包括子目录的  
ls -d显示目录本身名称一般和-l一起使用  
ls -ld目录和符号链接信息  
ls -1 文件分行显示  
ls –S 按从大到小排序  
ls –t 按mtime排序  
ls –u 配合-t选项，显示并按atime从新到旧排序  
ls –U 按目录存放顺序显示  
ls –X 按文件后缀排序  
目录排序：数字在前，小写在大写后面，竖着顺序显示  
### 16、文件有三个状态  
access time：访问时间，atime，读取文件内容  
modify time: 修改时间, mtime，改变文件内容（数据）  
change time: 改变时间, ctime，元数据发生改变  
### 17、文件通配符  
*匹配零个或多个字符  
??匹配任何单个字符  
?~ 当前用户家目录  
?~mage 用户mage家目录  
?~+ 当前工作目录  
?~-前一个工作目录  
?[0-9]匹配数字范围  
?[a-z]：字母  
?[A-Z]：字母  
?[wang]匹配列表中的任何的一个字符  
?[^wang]匹配列表中的所有字符以外的字符  
18、touch:创建空文件  
文件名有-需要在前面加--和空格  
-a仅改变atime和ctime  
-m 仅改变mtime和ctime  
-t [[CC]YY]MMDDhhmm[.ss]  
指定atime和mtime的时间戳  
-c如果文件不存在，则不予创建  

